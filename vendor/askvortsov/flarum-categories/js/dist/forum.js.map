{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@askvortsov/flarum-categories/webpack/bootstrap","webpack://@askvortsov/flarum-categories/webpack/runtime/compat get default export","webpack://@askvortsov/flarum-categories/webpack/runtime/define property getters","webpack://@askvortsov/flarum-categories/webpack/runtime/hasOwnProperty shorthand","webpack://@askvortsov/flarum-categories/webpack/runtime/make namespace object","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/extend']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/Model']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['tags/models/Tag']\"","webpack://@askvortsov/flarum-categories/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@askvortsov/flarum-categories/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['forum/app']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/components/Page']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['tags/utils/sortTags']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['tags/helpers/tagLabel']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/Component']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/components/Link']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@askvortsov/flarum-categories/./src/forum/components/StatWidget.tsx","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['common/utils/string']\"","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@askvortsov/flarum-categories/./src/forum/components/LastDiscussionWidget.tsx","webpack://@askvortsov/flarum-categories/./src/forum/components/Category.tsx","webpack://@askvortsov/flarum-categories/./src/forum/components/CategoriesPage.tsx","webpack://@askvortsov/flarum-categories/external root \"flarum.core.compat['tags/forum/components/TagsPage']\"","webpack://@askvortsov/flarum-categories/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/models/Tag'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/utils/sortTags'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/helpers/tagLabel'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport classList from 'flarum/common/utils/classList';\nimport app from 'flarum/forum/app';\n\nimport type Mithril from 'mithril';\n\ninterface Attrs {\n  count: number;\n  icon: string;\n  label: Mithril.Children;\n}\n\nexport default class StatWidget extends Component<Attrs> {\n  view() {\n    return (\n      <div class={classList('StatWidget', { 'Categories-compactMobileModeEnabled': !!app.forum.attribute('categories.compactMobile') })}>\n        {this.content().toArray()}\n      </div>\n    );\n  }\n\n  content() {\n    const items = new ItemList();\n\n    items.add('count', <div class=\"StatWidget-count\">{this.attrs.count}</div>, 100);\n    items.add(\n      'label',\n      <div class=\"StatWidget-label\">\n        <span className=\"Categories-showOnMobile\">{icon(this.attrs.icon)}</span>\n        <span className=\"Categories-hideOnMobile\">{this.attrs.label}</span>\n      </div>,\n      80\n    );\n\n    return items;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/string'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport { truncate } from 'flarum/common/utils/string';\nimport Link from 'flarum/common/components/Link';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport type Discussion from 'flarum/common/models/Discussion';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport extractText from 'flarum/common/utils/extractText';\nimport type Mithril from 'mithril';\n\ninterface Attrs {\n  discussion: Discussion;\n}\n\nexport default class LastDiscussionWidget extends Component<Attrs> {\n  /**\n   * Whether or not the user hover card is visible.\n   */\n  cardVisible!: boolean;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.cardVisible = false;\n  }\n\n  view() {\n    const discussion = this.attrs.discussion;\n\n    if (!discussion) {\n      return <div class=\"LastDiscussion\">{app.translator.trans('askvortsov-categories.forum.last_discussion_widget.no_discussions')}</div>;\n    }\n\n    const user = discussion.lastPostedUser();\n\n    return (\n      <Link class=\"LastDiscussion\" href={app.route.discussion(discussion, discussion.lastPostNumber() ?? 0)}>\n        {this.content().toArray()}\n      </Link>\n    );\n  }\n\n  content() {\n    const items = new ItemList();\n\n    const discussion = this.attrs.discussion;\n    const user = discussion.lastPostedUser();\n\n    items.add(\n      'avatar',\n      <Link className=\"LastDiscussion-avatar\" href={user ? app.route.user(user) : '#'} aria-label={extractText(username(user))}>\n        {!!user && avatar(user)}\n      </Link>,\n      100\n    );\n\n    items.add(\n      'mainContent',\n      <div class=\"LastDiscussion-content\">\n        <div class=\"LastDiscussion-bottomRow\">\n          {humanTime(discussion.lastPostedAt()!)}{' '}\n          <Link className=\"LastDiscussion-usernameLink\" href={user ? app.route.user(user) : '#'}>\n            <span style={{ display: 'inline', margin: '0 4px' }} role=\"presentation\">\n              |\n            </span>\n            {username(user)}\n          </Link>\n        </div>\n        <div class=\"LastDiscussion-topRow\">{truncate(discussion.title(), 26)}</div>\n      </div>,\n      50\n    );\n\n    let card: Mithril.Children = null;\n\n    if (user && this.cardVisible) {\n      card = UserCard.component({\n        user,\n        className: 'UserCard--popover',\n        controlsButtonClassName: 'Button Button--icon Button--flat',\n      });\n    }\n\n    items.add('card', <div class=\"LastDiscussion-userCardContainer\">{card}</div>, 10);\n\n    return items;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    let timeout: number;\n\n    this.$()\n      .on('mouseover', '.LastDiscussion-avatar, .LastDiscussion-usernameLinkUserCard, .username, .UserCard', () => {\n        clearTimeout(timeout);\n        timeout = window.setTimeout(this.showCard.bind(this), 300);\n      })\n      .on('mouseout', '.LastDiscussion-avatar, .LastDiscussion-usernameLinkUserCard, .username, .UserCard', () => {\n        clearTimeout(timeout);\n        timeout = window.setTimeout(this.hideCard.bind(this), 150);\n      });\n  }\n\n  onremove(vnode): void {\n    super.onremove(vnode);\n\n    this.$().off('mouseover mouseout');\n  }\n\n  /**\n   * Show the user card.\n   */\n  showCard() {\n    this.cardVisible = true;\n\n    m.redraw();\n\n    setTimeout(() => this.$('.UserCard').addClass('in'));\n  }\n\n  /**\n   * Hide the user card.\n   */\n  hideCard() {\n    $('.UserCard').removeClass('in');\n    this.cardVisible = false;\n    m.redraw();\n  }\n}\n","import Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\n\nimport icon from 'flarum/common/helpers/icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport sortTags from 'flarum/tags/utils/sortTags';\n\nimport StatWidget from './StatWidget';\nimport LastDiscussionWidget from './LastDiscussionWidget';\nimport app from 'flarum/forum/app';\nimport classList from 'flarum/common/utils/classList';\n\nimport type Mithril from 'mithril';\n\ninterface Attrs {\n  model: any;\n  parent: any;\n}\n\n/*\n * Provide compatibility for Flarum Tag Passwords extension, this is to ensure that locked tag with Password or Group permission has view restriction on latest discussion.\n * To know if a tag is protected, there is an isUnlocked variable that is specific for this extension.\n * https://github.com/datlechin/flarum-tag-passwords\n * \n */\ninterface TagLocked {\n  icon: icon;\n  text: string;\n  isVisible: boolean;\n}\n\nexport default class Category extends Component<Attrs> {\n  tag!: any;\n  isChild!: boolean;\n  collapsed!: boolean;\n  compactMobileMode!: boolean;\n  tagLocked!: TagLocked;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.tag = this.attrs.model;\n\n    this.isChild = this.attrs.parent != null && this.attrs.parent != undefined;\n\n    this.collapsed = false;\n\n    // Identify if the tag has been Goup or Password protected with flarum-tag-passwords extension.\n    if (typeof this.tag.isUnlocked == 'function') {\n      if ((this.tag.isGroupProtected() || this.tag.isPasswordProtected()) && !this.tag.isUnlocked()) {\n        this.tagLocked = {\n          icon: this.tag.isPasswordProtected() ? icon('fas fa-lock') : icon('fas fa-user-lock'),\n          text: this.tag.isPasswordProtected() ? app.translator.trans('datlechin-tag-passwords.forum.tags_page.password_protected') : app.translator.trans('datlechin-tag-passwords.forum.tags_page.group_protected'),\n          isVisible: this.tag.isProtectedTagDisplayedForTagsPage() == true\n        };\n      }\n    }\n\n    window.addEventListener('resize', function () {\n      m.redraw();\n    });\n  }\n\n  view() {\n    const tag = this.tag;\n\n    if (!tag) {\n      return null;\n    } else if (this.tagLocked && !this.tagLocked.isVisible) {\n      // Hide the navigation when protected Tag in 'Tag Passwords > Display protected Tag in Tags page navigation' is disabled\n      return null;\n    }\n\n    this.compactMobileMode = !!app.forum.attribute('categories.compactMobile');\n\n    return (\n      <li\n        className={classList('TagCategory', `TagCategory-${tag.slug()}`, {\n          SubCategory: this.isChild,\n          ParentCategory: !this.isChild,\n          compactMobile: this.compactMobileMode,\n        })}\n      >\n        {this.categoryItems().toArray()}\n      </li>\n    );\n  }\n\n  categoryItems() {\n    const items = new ItemList();\n    const tag = this.tag;\n\n    const children = this.isChild ? [] : sortTags(tag.children() || []);\n\n    items.add(\n      'link',\n      <Link\n        className={`TagCategory-content ${app.forum.attribute('categories.compactMobile')? 'compactMobile' : '' } TagCategory-content-${tag.slug()}`}\n        style={this.isChild ? {} : { backgroundColor: tag.color() }}\n        href={app.route.tag(tag)}\n      >\n        {this.contentItems().toArray()}\n      </Link>,\n      100\n    );\n\n    if (!this.compactMobileMode && !this.isChild) {\n      items.add(\n        'children',\n        <ol className=\"TagCategory-subTagList\">{children.map((child) => [Category.component({ model: child, parent: this })])}</ol>,\n        10\n      );\n    }\n\n    return items;\n  }\n\n  contentItems() {\n    const items = new ItemList();\n\n    const tag = this.tag;\n    const children = this.isChild ? [] : sortTags(tag.children() || []);\n\n    items.add('alignStart', <div className=\"TagCategory-alignStart\">{this.alignStartItems().toArray()}</div>, 100);\n\n    items.add('alignEnd', <div className=\"TagCategory-alignEnd\">{this.alignEndItems().toArray()}</div>, 50);\n\n    const childrenInContent = !this.isChild && this.compactMobileMode;\n\n    if (childrenInContent && !this.collapsed) {\n      items.add(\n        'children',\n        <ol className=\"TagCategory-subTagList\">{children.map((child) => [Category.component({ model: child, parent: this })])}</ol>,\n        10\n      );\n    }\n\n    return items;\n  }\n\n  alignStartItems() {\n    const items = new ItemList();\n\n    const tag = this.tag;\n    const children = this.isChild ? [] : sortTags(tag.children() || []);\n\n    items.add('icon', <span className=\"TagCategory-icon\">{this.iconItems().toArray()}</span>, 100);\n\n    items.add('main', <div className=\"TagCategory-main\">{this.mainItems().toArray()}</div>, 50);\n\n    if (!!children.length) {\n      items.add(\n        'toggleArrow',\n        <button\n          className=\"TagCategory-toggleArrow Button--ua-reset\"\n          onclick={(e: MouseEvent) => {\n            this.toggleArrow(e);\n          }}\n        >\n          {icon(this.collapsed ? 'fas fa-caret-down' : 'fas fa-caret-up')}\n        </button>,\n        10\n      );\n    }\n\n    return items;\n  }\n\n  alignEndItems() {\n    const items = new ItemList();\n\n    if (this.tagLocked) {\n      items.add('locked', <div className=\"TagCategory-locked\">{this.lockedItems().toArray()}</div>, 100);\n      return items;\n    }\n\n    const tag = this.tag;\n\n    items.add('stats', <div className=\"TagCategory-stats StatWidgetList\">{this.statItems().toArray()}</div>, 100);\n\n    items.add(\n      'lastDiscussion',\n      <div className={classList('TagCategory-lastDiscussion', { empty: !tag.lastPostedDiscussion() })}>{this.lastDiscussionItems().toArray()}</div>,\n      50\n    );\n\n    return items;\n  }\n\n  lockedItems() {\n    const items = new ItemList();\n    const classes = this.compactMobileMode ? 'fa-stack fa-1x' : 'fa-stack fa-2x';\n    items.add(\n      'icon',\n      <span className={classes}>\n        {\n          <i className=\"fa-stack-2x\" style={{ color: this.tag.color() }}></i>\n        }\n        {this.tagLocked.icon}\n      </span>,\n      10\n    );\n    items.add(\n      'LockedText',\n      <div className={classList('TagCategory-lockedText')}>{this.tagLocked.text}</div>,\n      50\n    );\n    return items;\n  }\n\n  iconItems() {\n    const items = new ItemList();\n\n    if (this.tag.icon() && this.isChild) {\n      const style: Record<string, unknown> = {};\n\n      let iconClasses = 'fa-stack-1x CategoryIcon';\n\n      if (app.forum.attribute('categories.childBareIcon')) {\n        iconClasses += ' NoBackgroundCategoryIcon';\n        style.color = '#fafafa';\n      } else {\n        style.color = this.tag.color();\n      }\n\n      const classes = this.compactMobileMode ? 'fa-stack fa-1x' : 'fa-stack fa-2x';\n\n      items.add(\n        'icon',\n        <span className={classes}>\n          {!!app.forum.attribute('categories.childBareIcon') && (\n            <i className=\"fa fa-circle fa-stack-2x icon-background\" style={{ color: this.tag.color() }}></i>\n          )}\n          {icon(this.tag.icon(), { className: iconClasses, style: style })}\n        </span>,\n        10\n      );\n    } else if (this.tag.icon() && !app.forum.attribute('categories.parentRemoveIcon')) {\n      const classes = this.compactMobileMode ? 'fa-stack fa-2x' : 'fa-stack fa-3x';\n\n      items.add('icon', <span className={classes}>{icon(this.tag.icon(), { className: 'fa-stack-1x CategoryIcon' })}</span>, 10);\n    }\n\n    return items;\n  }\n\n  mainItems() {\n    const items = new ItemList();\n\n    items.add('name', <h4 className=\"TagCategory-name\">{this.tag.name()}</h4>, 15);\n\n    if (this.tag.description() && (this.isChild || !app.forum.attribute('categories.parentRemoveDescription'))) {\n      items.add('description', <div className=\"TagCategory-description\">{this.tag.description()}</div>, 10);\n    }\n\n    return items;\n  }\n\n  statItems() {\n    const items = new ItemList();\n\n    if (this.isChild || !app.forum.attribute('categories.parentRemoveStats')) {\n      items.add(\n        'discussionCount',\n        StatWidget.component({\n          count: Intl.NumberFormat().format(this.tag.discussionCount()),\n          label: app.translator.trans('askvortsov-categories.forum.stat-widgets.discussion_label'),\n          icon: 'fas fa-file-alt',\n        }),\n        15\n      );\n\n      items.add(\n        'postCount',\n        StatWidget.component({\n          count: Intl.NumberFormat().format(this.tag.postCount()),\n          label: app.translator.trans('askvortsov-categories.forum.stat-widgets.post_label'),\n          icon: 'fas fa-comment',\n        }),\n        10\n      );\n    }\n\n    return items;\n  }\n\n  lastDiscussionItems() {\n    const items = new ItemList();\n\n    if (this.isChild || !app.forum.attribute('categories.parentRemoveLastDiscussion')) {\n      items.add(\n        'lastDiscussion',\n        LastDiscussionWidget.component({\n          discussion: this.tag.lastPostedDiscussion(),\n        }),\n        10\n      );\n    }\n\n    return items;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$('.TagCategory-content,.TagCategory-toggleArrow').on('mouseenter', function (e) {\n      $(this).addClass('hover');\n      if ($(this).parent().hasClass('SubCategory') || $(this).hasClass('TagCategory-toggleArrow')) {\n        $(this).closest('.ParentCategory').children('.TagCategory-content').removeClass('hover');\n      }\n    });\n\n    this.$('.TagCategory-content,.TagCategory-toggleArrow').on('mouseleave', function (e) {\n      $(this).removeClass('hover');\n      if ($(this).parent().hasClass('SubCategory') || $(this).hasClass('TagCategory-toggleArrow')) {\n        $(this).closest('.ParentCategory').children('.TagCategory-content').addClass('hover');\n      }\n    });\n  }\n\n  onremove(vnode: Mithril.VnodeDOM<Attrs, this>): void {\n    super.onremove(vnode);\n\n    this.$('.TagCategory-content,.TagCategory-toggleArrow').off('mouseenter');\n    this.$('.TagCategory-content,.TagCategory-toggleArrow').off('mouseleave');\n  }\n\n  toggleArrow(e: MouseEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.collapsed = !this.collapsed;\n    m.redraw();\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport extractText from 'flarum/common/utils/extractText';\nimport classList from 'flarum/common/utils/classList';\n\nimport sortTags from 'flarum/tags/utils/sortTags';\nimport tagLabel from 'flarum/tags/helpers/tagLabel';\n\nimport Category from './Category';\n\nexport default class CategoriesPage extends Page {\n  tags!: any[];\n  loading!: boolean;\n\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('categories', extractText(app.translator.trans('askvortsov-category.forum.header.back_to_categories_tooltip')));\n\n    this.tags = [];\n\n    const preloaded = app.preloadedApiDocument<any>();\n\n    if (preloaded) {\n      this.tags = sortTags(preloaded.filter((tag: any) => !tag.isChild()));\n      return;\n    }\n\n    this.loading = true;\n\n    app.tagList.load(['parent', 'children', 'lastPostedDiscussion', 'lastPostedDiscussion.lastPostedUser']).then(() => {\n      this.tags = sortTags(app.store.all('tags').filter((tag) => !tag.isChild()));\n\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  view() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    const classes = ['CategoriesPage'];\n\n    return <div className={classList(classes)}>{this.pageItems().toArray()}</div>;\n  }\n\n  pageItems() {\n    const items = new ItemList();\n\n    items.add('hero', IndexPage.prototype.hero(), 100);\n\n    items.add(\n      'container',\n      <div className={app.forum.attribute('categories.fullPageDesktop') ? 'container topNavContainer' : 'container sideNavContainer'}>\n        {this.containerItems().toArray()}\n      </div>,\n      50\n    );\n\n    return items;\n  }\n\n  containerItems() {\n    const items = new ItemList();\n\n    const pinned = this.tags.filter((tag) => tag.position() !== null);\n    const cloud = this.tags.filter((tag) => tag.position() === null);\n\n    items.add(\n      'sideNav',\n        <nav className={app.forum.attribute('categories.fullPageDesktop') ? 'CategoriesPage-nav IndexPage-nav topNav' : 'CategoriesPage-nav IndexPage-nav sideNav'}>\n          <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n        </nav>,\n      100\n    );\n\n    items.add(\n      'categoriesList',\n      <div className=\"CategoriesPage-content sideNavOffset\">\n        <ol className=\"TagCategoryList\">\n          {pinned.map((tag) => {\n            return Category.component({ model: tag });\n          })}\n        </ol>\n\n        {cloud.length ? <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, { link: true }), ' '])}</div> : ''}\n      </div>,\n      50\n    );\n\n    return items;\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(extractText(app.translator.trans('askvortsov-categories.forum.all_categories.meta_title_text')));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/forum/components/TagsPage'];","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Model from 'flarum/common/Model';\nimport Tag from 'flarum/tags/models/Tag';\nimport CategoriesPage from './components/CategoriesPage';\nimport TagsPage from 'flarum/tags/forum/components/TagsPage';\nimport Category from './components/Category';\nimport LastDiscussionWidget from './components/LastDiscussionWidget';\nimport StatWidget from './components/StatWidget';\n\nfunction pruneIndexNav(items, func) {\n  const isTagsPageVisible = app.forum.attribute('categories.keepTagsNav');\n\n  const isCustomTagsHidden = (app.current.matches(CategoriesPage) || app.current.matches(TagsPage));\n  for (const item in items.items) {\n    if (func(item)) {\n      if(item == 'tags') {\n        /*\n         * Tags must be visible on the navibation bar, when the User has selected to keep Tags within the Extension Settings.\n         * Finding all items that begins with 'tag' will also load 'tags', due to custom tag are labelled 'tag1', 'tag2' and so-on\n         */\n        if (!isTagsPageVisible) {\n          items.remove(item);\n        }\n      } else {\n        /*\n         * This is for custom tags, where they should not be visible within CategoriesPage and TagsPage\n         */\n        if (isCustomTagsHidden) {\n          items.remove(item);\n        }\n      }\n    }\n  }\n}\n\napp.initializers.add('askvortsov/flarum-categories', () => {\n  app.routes.categories = {\n    path: '/categories',\n    component: CategoriesPage,\n  };\n\n  Tag.prototype.postCount = Model.attribute('postCount');\n\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    items.add(\n      'categories',\n      <LinkButton icon=\"fas fa-th-list\" href={app.route('categories')}>\n        {app.translator.trans('askvortsov-categories.forum.index.categories_link')}\n      </LinkButton>,\n      -9.5\n    );\n\n    if (items.has('moreTags')) {\n      items.replace('moreTags', <LinkButton href={app.route('categories')}>{app.translator.trans('flarum-tags.forum.index.more_link')}</LinkButton>);\n    }\n\n    pruneIndexNav(items, (item) => item.startsWith('tag'));\n\n    return items;\n  });\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    pruneIndexNav(items, (item) => item !== 'newDiscussion' && item !== 'nav');\n    return items;\n  });\n});\n\nexport default {\n  'components/CategoriesPage': CategoriesPage,\n  'components/Category': Category,\n  'components/LastDiscussionWidget': LastDiscussionWidget,\n  'components/StatWidget': StatWidget,\n};\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","StatWidget","_Component","apply","arguments","_proto","view","m","class","classList","app","this","content","toArray","items","ItemList","add","attrs","count","className","icon","label","Component","LastDiscussionWidget","_this","_len","length","args","Array","_key","concat","cardVisible","oninit","vnode","_discussion$lastPostN","discussion","lastPostedUser","Link","href","lastPostNumber","user","extractText","username","avatar","humanTime","lastPostedAt","style","display","margin","role","truncate","title","card","UserCard","controlsButtonClassName","oncreate","timeout","_this2","$","on","clearTimeout","window","setTimeout","showCard","hideCard","onremove","off","_this3","redraw","addClass","removeClass","Category","tag","isChild","collapsed","compactMobileMode","tagLocked","model","parent","undefined","isUnlocked","isGroupProtected","isPasswordProtected","text","isVisible","isProtectedTagDisplayedForTagsPage","addEventListener","slug","SubCategory","ParentCategory","compactMobile","categoryItems","children","sortTags","backgroundColor","color","contentItems","map","child","component","alignStartItems","alignEndItems","_this4","iconItems","mainItems","onclick","e","toggleArrow","lockedItems","statItems","empty","lastPostedDiscussion","lastDiscussionItems","classes","iconClasses","name","description","Intl","NumberFormat","format","discussionCount","postCount","hasClass","closest","preventDefault","stopPropagation","CategoriesPage","_Page","tags","loading","preloaded","filter","then","LoadingIndicator","pageItems","IndexPage","containerItems","pinned","position","cloud","listItems","tagLabel","link","Page","pruneIndexNav","func","isTagsPageVisible","forum","attribute","isCustomTagsHidden","current","matches","TagsPage","item","remove","initializers","routes","categories","path","Tag","Model","extend","LinkButton","route","translator","trans","has","replace","startsWith"],"sourceRoot":""}